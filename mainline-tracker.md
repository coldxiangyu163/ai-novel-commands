---
description: 主线追踪器(防止主线失控,量化进度,避免支线过度膨胀)
argument-hint: [无参数，建议每10章运行一次]
---

# 主线追踪器

**建议每10章运行一次，检测主线进度和支线占比健康度。**

> **核心理念**：
> - 长篇失控的一大原因：主线被支线淹没，读者忘记主角的核心目标
> - 主线追踪器像"GPS导航"，时刻提醒"距离目标还有多远"
> - 量化主线进度，可视化展示，防止"写着写着就跑偏"

---

## 第一步：理解主线与支线

### 1.1 什么是主线？

**主线（Main Quest）**是贯穿全书的核心目标/核心冲突，通常在开篇或前10%确立。

### 1.2 主线类型

| 类型 | 核心目标 | 示例 |
|------|---------|------|
| **复仇型** | 杀死仇人/摧毁敌对势力 | 主角要为家人报仇 |
| **生存型** | 在末世/危机中活下来 | 末世中寻找安全区 |
| **成长型** | 从弱变强，达到某境界 | 修炼到最高境界 |
| **拯救型** | 拯救某人/某势力/世界 | 拯救被困的恋人 |
| **探索型** | 揭示世界观真相/寻找某物 | 寻找末世起源真相 |
| **夺取型** | 夺取权力/资源/地位 | 重生后夺回家族控制权 |

### 1.3 什么是支线？

**支线（Side Quest）**是围绕主线的辅助剧情，包括：
- 感情线（与女主的感情发展）
- 队友线（招募/培养队友）
- 势力线（建立/对抗势力）
- 成长线（能力觉醒/突破）
- 资源线（收集资源/物品）

### 1.4 主线与支线的健康关系

```
健康比例：
主线章节占比：50-60%
支线章节占比：40-50%

⚠️ 不健康状态：
- 主线占比<40%：主线失焦，读者忘记核心目标
- 主线占比>70%：单调，缺少丰富性
- 连续15章无主线推进：主线停滞风险
```

---

## 第二步：读取项目文件

1. `AGENTS.md` - 主角核心目标
2. `小说规划.md` - 全书规划
3. `剧情设计.md` - 深度剧情设计
4. `卷X大纲.md` - 各卷大纲（已规划的）
5. `主线进度报告.md`（如已生成）- 上次的主线进度

---

## 第三步：提取主线定义

### 3.1 从项目文件中提取主线

从 `AGENTS.md` 或 `剧情设计.md` 中提取：

```markdown
## 主线定义

### 核心目标
[主角的终极目标是什么？]

**示例**：
- 复仇：杀死害死家人的仇人"张三"
- 生存：找到传说中的"绝对安全区"
- 探索：揭示末世起源真相

### 主线阶段划分

将主线分为若干阶段（建议5-10个阶段）：

| 阶段 | 阶段目标 | 预期完成章节 | 完成标志 |
|------|---------|-------------|----------|
| 阶段1 | 确立目标 | 第1-10章 | 主角发誓复仇 |
| 阶段2 | 初步行动 | 第11-50章 | 找到仇人线索 |
| 阶段3 | 第一次对抗 | 第51-100章 | 与仇人手下交战 |
| 阶段4 | 实力提升 | 第101-150章 | 主角达到与仇人抗衡的实力 |
| 阶段5 | 中期对抗 | 第151-250章 | 摧毁仇人势力 |
| 阶段6 | 关键信息 | 第251-300章 | 发现仇人弱点 |
| 阶段7 | 最终准备 | 第301-350章 | 集结力量，做最终准备 |
| 阶段8 | 决战 | 第351-380章 | 与仇人决战 |
| 阶段9 | 结局 | 第381-400章 | 复仇完成，后续处理 |

**进度量化**：
- 总阶段数：9
- 当前完成：X阶段
- 完成度：X/9 = XX%
```

---

## 第四步：逐章标注主线/支线

### 4.1 标注规则

为已规划/已写作的每一章标注：

```markdown
## 第X章《章节标题》主线标注

### 章节类型
- **主线章节** / **支线章节** / **混合章节**

### 主线内容
- **有/无**
- 推进内容：[本章推进了主线哪个阶段？具体做了什么？]
- 推进幅度：★☆☆☆☆ / ★★☆☆☆ / ★★★☆☆ / ★★★★☆ / ★★★★★
- 对应阶段：阶段X

### 支线内容
- **有/无**
- 支线类型：感情线/队友线/势力线/成长线/资源线/其他
- 支线内容：[简述]
- 支线占比：10% / 30% / 50% / 70% / 90%

### 章节主次
- 主线为主（主线占比≥70%）
- 支线为主（支线占比≥70%）
- 主线支线均衡（主线支线各占50%左右）
```

### 4.2 推进幅度判定标准

| 幅度 | 定义 | 示例 |
|------|------|------|
| ★☆☆☆☆ | 微弱推进 | 主角提到一句目标，但无实质行动 |
| ★★☆☆☆ | 小幅推进 | 主角获得一条小线索 |
| ★★★☆☆ | 中等推进 | 主角完成阶段内的小目标 |
| ★★★★☆ | 大幅推进 | 主角完成一个阶段 |
| ★★★★★ | 关键推进 | 主角完成核心阶段（如决战） |

---

## 第五步：生成主线进度可视化

### 5.1 主线进度条

```markdown
# 主线进度报告

## 一、主线进度总览

### 核心目标
[主角的核心目标]

### 当前进度
```
阶段1 ████████████████████ 100% ✓ 完成
阶段2 ████████████████████ 100% ✓ 完成
阶段3 ████████████▌_______ 65%  ← 当前
阶段4 ____________________ 0%
阶段5 ____________________ 0%
阶段6 ____________________ 0%
阶段7 ____________________ 0%
阶段8 ____________________ 0%
阶段9 ____________________ 0%

总进度：3/9阶段（33%）
```

**进度说明**：
- ✓ 已完成阶段：2个
- ← 进行中阶段：1个（65%）
- 未开始阶段：6个
```

### 5.2 主线推进时间轴

```markdown
## 二、主线推进时间轴

章节: 1   10  20  30  40  50  60  70  80  90  100 110 120 ... XXX
推进: █   ▅   ▃   ▂   ▃   ▅   ▂   ▂   ▃   ▅   █   ▅   ▃  ... ?
阶段: ├─阶段1─┤ ├──阶段2────┤ ├────阶段3────────┤  ... 阶段9
标注: 确立目标  寻找线索    第一次对抗             ... 决战

**图例**：
- █ = 关键推进（★★★★☆以上）
- ▅ = 中等推进（★★★☆☆）
- ▃ = 小幅推进（★★☆☆☆）
- ▂ = 微弱推进（★☆☆☆☆）
```

---

## 第六步：主线/支线占比统计

### 6.1 章节类型分布

```markdown
## 三、主线/支线占比统计

### 章节类型分布（已规划/已写作XXX章）

| 类型 | 章节数 | 占比 | 健康值 | 状态 |
|------|-------|------|--------|------|
| 主线章节 | XX章 | XX% | 50-60% | ✓/⚠️/✗ |
| 支线章节 | XX章 | XX% | 30-40% | ✓/⚠️/✗ |
| 混合章节 | XX章 | XX% | 5-10% | ✓/⚠️/✗ |
| 过渡章节（无主线无支线） | XX章 | XX% | ≤5% | ✓/⚠️/✗ |

**评级标准**：
- ✓ 健康：主线占比50-60%
- ⚠️ 需要注意：主线占比40-50% 或 60-70%
- ✗ 必须调整：主线占比<40% 或 >70%
```

### 6.2 支线类型分布

```markdown
### 支线类型分布

| 支线类型 | 章节数 | 占比 | 健康值 | 状态 |
|---------|-------|------|--------|------|
| 感情线 | XX章 | XX% | 15-20% | ✓/⚠️/✗ |
| 队友线 | XX章 | XX% | 10-15% | ✓/⚠️/✗ |
| 势力线 | XX章 | XX% | 10-15% | ✓/⚠️/✗ |
| 成长线 | XX章 | XX% | 5-10% | ✓/⚠️/✗ |
| 资源线 | XX章 | XX% | 5-10% | ✓/⚠️/✗ |
| 其他支线 | XX章 | XX% | <5% | ✓/⚠️/✗ |

**注**：占比是相对于"支线章节总数"计算
```

---

## 第七步：主线停滞预警

### 7.1 停滞检测规则

```markdown
## 四、主线停滞预警

### 停滞检测规则
- ⚠️ 轻度停滞：连续10章无主线推进（★★☆☆☆以上）
- ✗ 中度停滞：连续15章无主线推进
- ✗✗ 严重停滞：连续20章无主线推进

### 检测结果

#### ⚠️ 轻度停滞区域
| 区域 | 章节范围 | 停滞章数 | 问题 | 建议 |
|------|---------|---------|------|------|
| 区域1 | 第X-X章 | 12章 | 连续12章都是支线（感情线） | 在第X章插入主线推进（获得关键线索） |

#### ✗ 严重停滞区域
| 区域 | 章节范围 | 停滞章数 | 问题 | 建议 |
|------|---------|---------|------|------|
| 区域1 | 第X-X章 | 18章 | 主线完全消失，读者可能遗忘核心目标 | 必须在第X章强化主线（阶段性突破） |
```

### 7.2 阶段停滞预警

```markdown
### 阶段停滞预警

| 阶段 | 预期章节 | 实际章节 | 超期 | 状态 |
|------|---------|---------|-----|------|
| 阶段3 | 第51-100章（50章） | 第51-120章（70章） | +20章 | ⚠️ 拖沓 |

**问题分析**：
- 阶段3预期50章完成，实际用了70章，超期20章
- 原因：支线过度膨胀（感情线占用15章，队友线占用12章）
- 建议：压缩支线，或将阶段3拆分为两个子阶段
```

---

## 第八步：支线膨胀检测

### 8.1 支线膨胀规则

```markdown
## 五、支线膨胀检测

### 膨胀检测规则
- ⚠️ 轻度膨胀：某支线占比>25%（相对支线总章节数）
- ✗ 中度膨胀：某支线占比>35%
- ✗✗ 严重膨胀：某支线占比>50%（喧宾夺主）

### 检测结果

#### ⚠️ 轻度膨胀
| 支线 | 章节数 | 占比 | 问题 | 建议 |
|------|-------|------|------|------|
| 感情线 | 18章 | 30% | 占比偏高 | 适当压缩，或与主线融合 |

#### ✗ 严重膨胀
| 支线 | 章节数 | 占比 | 问题 | 建议 |
|------|-------|------|------|------|
| 势力线 | 35章 | 55% | 喧宾夺主，已成为"第二主线" | 必须大幅压缩，或重新定义主线 |
```

### 8.2 支线连续性检测

```markdown
### 支线连续性检测

**检测规则**：单一支线连续出现>7章 → 过度连续风险

| 支线 | 连续区域 | 连续章数 | 问题 | 建议 |
|------|---------|---------|------|------|
| 感情线 | 第X-X章 | 9章 | 连续9章都是感情线，主线消失 | 在第X、X章插入主线场景 |
```

---

## 第九步：主线健康度评分

### 9.1 综合评分

```markdown
## 六、主线健康度评分

### 综合评分：XX/100分

#### 分项评分

| 维度 | 得分 | 满分 | 说明 |
|------|-----|------|------|
| 进度合理性 | XX | 30 | 当前进度是否符合预期 |
| 推进密度 | XX | 25 | 主线推进是否足够频繁 |
| 占比健康度 | XX | 20 | 主线占比是否在50-60% |
| 停滞控制 | XX | 15 | 是否避免长期停滞 |
| 支线平衡 | XX | 10 | 支线是否过度膨胀 |

### 健康度等级
- 90-100分：✓ 优秀（主线非常清晰）
- 75-89分：✓ 良好（主线清晰）
- 60-74分：⚠️ 及格（存在小问题）
- 40-59分：✗ 不及格（存在明显问题）
- <40分：✗✗ 危险（主线失控）
```

### 9.2 详细评分标准

```markdown
### 详细评分标准

#### 1. 进度合理性（30分）
- 当前进度符合预期（±10%）：30分
- 轻微偏离预期（±10-20%）：20分
- 明显偏离预期（±20-30%）：10分
- 严重偏离预期（>±30%）：0分

**计算方式**：
- 预期进度 = （当前章节 / 总章节）× 100%
- 实际进度 = （完成阶段 / 总阶段）× 100%
- 偏离度 = |预期进度 - 实际进度|

#### 2. 推进密度（25分）
- 平均每10章有≥2次主线推进（★★☆☆☆以上）：25分
- 平均每10章有1-2次推进：15分
- 平均每10章<1次推进：5分

#### 3. 占比健康度（20分）
- 主线占比50-60%：20分
- 主线占比45-50% 或 60-65%：15分
- 主线占比40-45% 或 65-70%：10分
- 主线占比<40% 或 >70%：0分

#### 4. 停滞控制（15分）
- 无连续10章以上停滞：15分
- 有1处连续10-15章停滞：10分
- 有1处连续15-20章停滞：5分
- 有连续20章以上停滞：0分

#### 5. 支线平衡（10分）
- 所有支线占比<30%：10分
- 有支线占比30-40%：7分
- 有支线占比40-50%：3分
- 有支线占比>50%：0分
```

---

## 第十步：优化建议

### 10.1 针对性优化方案

```markdown
## 七、优化建议

### 主线推进优化

#### 停滞区域优化
**区域：第X-X章（连续15章无主线推进）**

**方案A：插入主线场景**（推荐）
- 第X章：主角获得关键线索（★★☆☆☆）
- 第X章：主角与仇人手下遭遇（★★★☆☆）
- 效果：主线重新回到视野

**方案B：支线融合主线**
- 将第X章的感情线场景改为：主角与女主约会时意外发现仇人踪迹
- 效果：支线不变，但融入主线元素

---

### 支线压缩优化

#### 感情线压缩（当前18章，建议压缩到12章）
**压缩方案**：
- 删减：第X、X章（纯日常甜蜜，可合并）
- 合并：第X、X章合并为1章
- 融合主线：第X章改为"约会时遇到危机"
- 压缩后：12章 ✓

---

### 主线强化建议

#### 在关键节点强化主线
| 位置 | 当前状态 | 建议强化 |
|------|---------|----------|
| 第100章（节拍表：第二幕开始） | 仅有支线 | 增加主线：阶段3完成，进入阶段4 |
| 第200章（节拍表：中点） | 主线推进较弱 | 强化为★★★★☆推进：重大反转 |
```

---

## 第十一步：生成主线进度报告

保存到 `主线进度报告.md`：

```markdown
# [书名] 主线进度报告

生成时间：XXXX-XX-XX
基于章节：第1-XXX章（已规划/已写作）

---

## 一、主线进度总览
[插入进度条]

---

## 二、主线推进时间轴
[插入时间轴]

---

## 三、主线/支线占比统计
[插入占比统计]

---

## 四、主线停滞预警
[插入停滞预警]

---

## 五、支线膨胀检测
[插入膨胀检测]

---

## 六、主线健康度评分
[插入评分]

---

## 七、优化建议
[插入优化建议]

---

## 八、下阶段目标

### 当前阶段：阶段X（XX%）
**阶段目标**：[简述]
**建议章节数**：X章
**关键推进点**：
- 第X章：[推进内容]
- 第X章：[推进内容]

### 下一阶段：阶段X+1
**阶段目标**：[简述]
**建议开始章节**：第X章
**预计章节数**：X章
```

---

## 第十二步：输出确认

```
===== 主线进度报告生成完成 =====

分析范围：第1-XXX章

主线健康度：XX/100分（✓优秀/✓良好/⚠️及格/✗不及格/✗✗危险）
- 进度合理性：XX/30分
- 推进密度：XX/25分
- 占比健康度：XX/20分
- 停滞控制：XX/15分
- 支线平衡：XX/10分

主线进度：X/X阶段（XX%）
主线占比：XX%（目标50-60%）

风险预警：
⚠️ [如有风险，列出]

已生成文件：
✓ 主线进度报告.md

下一步：
1. 根据报告优化大纲/写作计划
2. 每10章再次运行本命令，持续跟踪
3. 如主线健康度<60分，必须调整

===========================
```

---

## 使用时机

```
【建议运行频率】
/plan-volume X → 规划大纲
    ↓
[每规划/写作10章]
    ↓
/mainline-tracker ← 检查主线进度
    ↓
[根据报告调整]
    ↓
[继续写作10章]
    ↓
/mainline-tracker ← 再次检查
    ↓
...

【关键节点】
1. 规划完第一卷后运行：检查主线是否确立清晰
2. 写作到第50章后运行：检查主线是否停滞
3. 写作到第100章后运行：检查支线是否膨胀
4. 写作到第200章后运行：检查主线是否符合节拍表（中点）
5. 写作到第300章后运行：检查主线是否进入冲刺阶段
```

---

## 注意事项

1. **主线要单一明确**：不要有多个"核心目标"并列（会混乱）
2. **阶段划分要合理**：5-10个阶段，每个阶段有明确完成标志
3. **支线要服务主线**：支线可以丰富故事，但不能喧宾夺主
4. **定期检查**：不要写了100章才发现主线失控，建议每10章检查
5. **灵活调整**：如发现主线设计不合理，可以调整阶段划分

---

## 附录：主线设计最佳实践

### A. 主线阶段划分技巧

**递进原则**：每个阶段的目标应该比上一阶段更难、更重要

```
✓ 好的阶段划分：
阶段1：确立目标（简单）
阶段2：寻找线索（简单）
阶段3：第一次对抗（中等难度）
阶段4：提升实力（中等难度）
阶段5：中期对抗（高难度）
阶段6：揭示真相（高难度）
阶段7：最终准备（高难度）
阶段8：决战（极高难度）
阶段9：结局（收尾）

✗ 坏的阶段划分：
阶段1：确立目标
阶段2：决战（太快）
阶段3：寻找线索（倒退）
阶段4：决战（重复）
```

**量化标准**：每个阶段要有可量化的完成标志

```
✓ 好的完成标志：
- "主角获得了仇人的位置"（明确）
- "主角实力达到5级（足以与仇人抗衡）"（量化）
- "主角摧毁了仇人的主要据点"（具体）

✗ 坏的完成标志：
- "主角变强了"（不具体）
- "主角做好准备了"（模糊）
- "主角进行了一些行动"（不明确）
```

### B. 主线推进节奏

**推进密度建议**：

| 阶段 | 推进密度 | 说明 |
|------|---------|------|
| 前期（第1-100章） | 2-3次/10章 | 节奏适中，建立世界观 |
| 中期（第101-300章） | 3-4次/10章 | 主线稳定推进 |
| 后期（第301-400章） | 4-5次/10章 | 加速冲刺，高潮迭起 |

**推进幅度建议**：

```
大部分推进：★★☆☆☆~★★★☆☆（小幅到中等）
关键节点推进：★★★★☆（大幅推进，如阶段完成）
高潮推进：★★★★★（关键推进，如决战）
```

### C. 支线设计原则

**支线的三个功能**：
1. **丰富世界观**：通过支线展示世界观细节
2. **深化人物**：通过支线（如感情线）深化人物关系
3. **缓解节奏**：在主线高潮后用支线缓冲

**支线与主线的关系**：
- ✓ 支线最终应服务主线（如：感情线中女主帮助主角完成主线目标）
- ✗ 支线与主线完全无关（浪费篇幅）

**支线展开技巧**：
- 前期：支线占比30-40%（建立角色关系）
- 中期：支线占比40-50%（丰富剧情）
- 后期：支线占比20-30%（收束，聚焦主线）

### D. 常见主线失控模式

**模式1：主线消失**
- **症状**：连续20章无主线推进，读者忘记核心目标
- **原因**：支线过度膨胀（如感情线、队友线占用太多篇幅）
- **解决**：压缩支线，每10章必须有主线推进

**模式2：主线拖沓**
- **症状**：某阶段用了100章还没完成（预期50章）
- **原因**：阶段目标不明确，或支线干扰
- **解决**：拆分阶段，或加快推进节奏

**模式3：主线突变**
- **症状**：写着写着主线变了（如：从复仇变成争霸）
- **原因**：初期主线设计不够吸引力，中途改变
- **解决**：要么坚持原主线，要么明确"主线升级"（如：复仇完成后进入争霸）

**模式4：支线喧宾夺主**
- **症状**：某支线占比>50%，已成为"第二主线"
- **原因**：支线写得太爽，停不下来
- **解决**：要么压缩支线，要么重新定义主线（将支线升级为主线）

---

## 常见问题

**Q1：我的书有两条主线（如：复仇+争霸），怎么追踪？**
A：建议设定"主主线"和"副主线"：
- 主主线：占比40-50%
- 副主线：占比20-30%
- 其他支线：占比20-30%

但要注意：双主线很容易失控，建议前期只聚焦一条主线，中后期再展开副主线。

**Q2：我的主线占比只有45%，报告说"需要注意"，一定要调整到50%以上吗？**
A：不一定。45%也可以接受，关键看：
- 主线是否清晰？读者是否记得核心目标？
- 支线是否服务主线？
- 是否有长期停滞（连续15章无主线推进）？

如果以上都没问题，45%也是健康的。

**Q3：我的感情线占比30%（相对支线总数），报告说"轻度膨胀"，但读者很喜欢怎么办？**
A：30%在可接受范围内。如果读者喜欢，可以保持。但要注意：
- 不要让感情线连续出现超过7章（会让主线消失）
- 感情线最好与主线融合（如：约会时推进主线）

**Q4：我的主线进度超前（当前第100章，但已完成50%的阶段），是好事还是坏事？**
A：取决于原因：
- 如果是因为推进效率高，节奏紧凑：✓ 好事
- 如果是因为跳过了重要铺垫，太仓促：✗ 坏事

建议检查：是否每个阶段都充分展开？是否有足够的冲突和张力？

**Q5：每10章运行一次主线追踪器，会不会干扰创作？**
A：不会。主线追踪器是"体检工具"，帮助你及时发现问题。就像开车看导航，不会干扰你开车，反而帮你不迷路。

建议时机：
- 规划大纲时：每规划一卷后运行
- 写作时：每写作10章后运行
- 不需要每章都运行
