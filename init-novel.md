---
description: 初始化新小说项目（生成基础框架）
argument-hint: <小说名称> <题材> <字数目标>
---

# 新小说初始化：$ARGUMENTS

**这是新作品的起点，生成基础框架。后续用专项命令深化各部分。**

---

## 阶段零：检测包装文件（自动衔接 packaging-kit）

在收集信息前，先检测当前目录是否存在 `packaging-kit` 的输出文件：

### 检测文件
- `包装方案.md`（如果存在）

### 如果存在包装方案文件

自动读取并提取以下信息，**用户只需确认/微调**：

| 提取项 | 来源 |
|--------|------|
| 书名 | 包装方案 → 推荐组合 → 书名 |
| 题材 | 包装方案 → 包装定位卡 → 题材信号 |
| 核心卖点 | 包装方案 → 包装定位卡 → 一句话卖点 |
| 主角反差 | 包装方案 → 包装定位卡 → 主角反差 |
| 金手指 | 包装方案 → 包装定位卡 → 核心机制 |
| 核心目标 | 包装方案 → 包装定位卡 → 主线目标 |
| 爽点类型 | 包装方案 → 包装定位卡 → 核心爽点类型 |
| 简介 | 包装方案 → 推荐组合 → 简介版本 |
| 标签 | 包装方案 → 核心标签 |
| 开篇方案 | 包装方案 → 推荐组合 → 开篇方案 |
| 扩写骨架 | 包装方案 → 扩写骨架（如有，来自 idea-mill）|

**输出确认**：
```markdown
## 检测到包装方案，已自动填充以下信息：

- 书名：《XXX》
- 题材：XXX
- 一句话卖点：XXX
- 主角反差：XXX
- 金手指：XXX
- 核心目标：XXX
- 爽点类型：XXX

### 开篇方案（来自 packaging-kit）
- 前100字钩子：XXX
- 前500字信息序：XXX
- 第1章末钩子：XXX
- 第2章任务：XXX
- 第3章小高潮：XXX

### 扩写骨架（来自 idea-mill，如有）
1) 1-10万：XXX
2) 10-25万：XXX
3) 25-40万：XXX
4) 40-50万：XXX

请确认或修改以上信息，然后继续补充其他必要信息。
```

### 如果不存在包装方案文件

直接进入阶段一，正常收集信息。

---

## 阶段一：信息收集（精简版）

只收集最核心的信息（如已从包装方案提取，跳过对应项）：

### 1. 基础信息
- 小说名称
- 目标字数
- 核心基调（爽文/虐文/轻松/热血等）

### 2. 题材设定（支持混合题材）
- **主题材**：（末世/玄幻/都市/科幻/历史/仙侠/游戏/悬疑/言情/其他）
- **副题材**：（可选多个，如：系统流、后宫、种田、权谋...）
- **混合比例**：（如：末世60% + 系统流25% + 后宫15%）
- **题材侧重说明**：（简述本作品对各题材元素的取舍）

### 3. 结构规划
- 卷数
- 每卷章节数
- 每章字数

### 4. 主角概要（简要）
- 姓名
- 金手指类型
- 核心目标（如：复仇/称霸/生存）
- 性格关键词（3个）

### 5. 感情线规划
- 是否需要感情线：是/否
- 感情线比重：主线/重要支线/点缀
- 女主数量：单女主/多女主/后宫
- 感情风格：甜宠/虐恋/细水长流/英雄救美

### 6. 核心卖点
- 主要爽点类型（打脸/复仇/装逼/逆袭/碾压/智斗）
- 区别于同类作品的特色

### 7. 差异化定位（⭐强制思考）

> **核心问题**：读者为什么选你而不选别人？

```markdown
## 差异化分析

### 同类爆款分析
列出2-3部同题材爆款作品：

| 作品 | 核心卖点 | 成功原因 |
|------|----------|----------|
| [作品1] | [它的卖点] | [为什么火] |
| [作品2] | [它的卖点] | [为什么火] |
| [作品3] | [它的卖点] | [为什么火] |

### 你的差异点
**必须回答以下问题：**

1. **设定差异**：你的世界观/金手指有什么独特之处？
   - 同类作品通常：[常见做法]
   - 你的做法：[你的创新]

2. **主角差异**：你的主角有什么不同？
   - 同类主角通常：[常见人设]
   - 你的主角：[独特之处]

3. **爽点差异**：你提供什么不一样的爽感？
   - 同类爽点通常：[常见爽法]
   - 你的爽点：[独特爽法]

4. **一句话差异化**：用一句话说明你的独特价值
   - "这是一本____的____文，不同于其他作品的是____"
```

### 8. 特殊化设定（本作品独有）
> 这里填写不属于任何标准模板的独特设定，让作品与众不同

- **独特世界观规则**：（如：这个世界的丧尸会说话/修炼体系与众不同）
- **创新元素**：（如：独创的金手指机制/特殊的社会结构）
- **对标准模板的调整**：（如：本作不需要仇人系统/升级体系简化处理）
- **其他特殊设定**：（任何你想强调的独特之处）

---

## 阶段1.5：卷结构自动规划（⭐如有扩写骨架）

> 如果从包装方案中读取到了扩写骨架（来自 idea-mill），自动生成卷结构规划

### 扩写骨架转卷结构

**输入**：扩写骨架（来自 idea-mill）
```
1) 1-10万：[阶段1描述]
2) 10-25万：[阶段2描述]
3) 25-40万：[阶段3描述]
4) 40-50万：[阶段4描述]
```

**自动转化为卷结构**：

```markdown
## 卷结构规划（基于扩写骨架）

### 总体规划
- 总字数：50万字
- 每章字数：4000字
- 总章节数：125章

### 卷划分

| 卷 | 字数范围 | 章节范围 | 阶段定位 | 核心任务 |
|----|----------|----------|----------|----------|
| 卷一 | 1-10万 | 第1-25章 | [阶段1] | [从骨架提取] |
| 卷二 | 10-20万 | 第26-50章 | [阶段2前半] | [从骨架提取] |
| 卷三 | 20-30万 | 第51-75章 | [阶段2后半+阶段3前半] | [从骨架提取] |
| 卷四 | 30-40万 | 第76-100章 | [阶段3后半] | [从骨架提取] |
| 卷五 | 40-50万 | 第101-125章 | [阶段4] | [从骨架提取] |

### 各卷核心内容（从扩写骨架展开）

#### 卷一：[卷名]（第1-25章）
- **阶段定位**：[从骨架提取]
- **核心任务**：
  - 主线：[具体化]
  - 支线：[具体化]
- **本卷高潮**：[预设]
- **本卷结尾钩子**：[预设]

#### 卷二：[卷名]（第26-50章）
...

[以此类推]
```

### 如果没有扩写骨架

询问用户基本的卷结构信息：
- 计划写多少卷？
- 每卷大约多少章？
- 每章多少字？

---

## 阶段二：生成 AGENTS.md（精简版）

> **设计原则**：AGENTS.md 只保留每次执行命令都必须知道的核心信息，详细内容放在专门文件中。

```markdown
# [书名] 写作规范

## 核心定位
- 书名：《XXX》
- 字数：XXX万字（X卷×X章×X字/章）
- 题材：XXX
- 基调：XXX
- 一句话卖点：XXX

## 差异化（核心竞争力）
> 这是一本____的____文，不同于其他作品的是____

核心差异点：
1. [设定差异]
2. [主角差异]
3. [爽点差异]

## 主角核心
- 姓名：XXX
- 金手指：XXX
- 核心目标：XXX
- 性格关键词：XXX、XXX、XXX

### 行为红线
- ❌ [禁止行为1]
- ❌ [禁止行为2]
- ✓ [必须行为1]
- ✓ [必须行为2]

## 写作红线
1. 政治敏感
2. 违法美化
3. 过度血腥
4. [本作品特有禁区]

## 文件索引
| 内容 | 文件位置 |
|------|----------|
| 卷结构/主线剧情 | `小说规划.md` |
| 详细人物档案 | `人物档案/` |
| 世界观设定 | `世界观/` |
| 剧情设计 | `剧情设计.md` |
| 写作风格 | `写作风格.md` |
| 当前状态 | `动态状态/` |
| 全书记忆 | `全书记忆/` |
```

---

## 阶段三：生成 小说规划.md（骨架版）

```markdown
# [书名] 总体规划

## 核心定位
- 书名：XXX
- 题材：XXX
- 字数：XXX万字
- 基调：XXX
- 卖点：XXX

## 卷章结构
- 总卷数：X卷
- 每卷章节：X章
- 每章字数：XXXX字
- 总字数：XXX万字

## 主角概要
- 姓名：XXX
- 金手指：XXX
- 核心目标：XXX

## 主线剧情（待完善）
> 使用 /design-plot 命令深度设计

### 起（卷一~卷二）
[待完善]

### 承（卷三~卷六）
[待完善]

### 转（卷七~卷八）
[待完善]

### 合（卷九~卷十）
[待完善]

## 感情线规划（待完善）
> 使用 /design-characters 和 /design-plot 命令深度设计

### 女主信息
- 女主数量：XXX
- 感情线比重：XXX

### 感情线时间表
| 女主 | 相遇 | 相知 | 升温 | 确定 | 考验 |
|------|------|------|------|------|------|
| [待完善] | 卷X | 卷X | 卷X | 卷X | 卷X |

## 核心配角出场表（待完善）
> 使用 /design-characters 命令深度设计配角

| 配角 | 身份 | 出场卷 | 相遇方式 | 角色功能 |
|------|------|--------|----------|----------|
| [待完善] | XXX | 卷X | [相遇场景] | [功能描述] |

## 约束表（待完善）
> 使用 design-world/design-characters 后补充

[待完善]
```

---

## 阶段四：创建目录结构

```
[书名]/
├── AGENTS.md
├── 小说规划.md
├── 写作流程.md          # 根据作品类型定制的流程指南
├── 人物档案/
│   └── .gitkeep
├── 世界观/
│   └── .gitkeep
├── 全书记忆/
│   ├── 伏笔追踪表.md
│   ├── 已用套路库.md
│   ├── 人物里程碑.md
│   ├── 感情线节点.md      # 按需：有感情线时创建
│   ├── 势力变化表.md      # 按需：权谋/宫斗/多势力博弈时创建
│   └── 世界线进度.md      # 按需：末世/时间线复杂时创建
├── 动态状态/
│   ├── 人物当前状态.md
│   └── 叙事手法记录.md
├── 卷一-待命名/
│   ├── 卷一大纲.md（空白模板）
│   ├── 章节摘要.md
│   ├── 进度追踪.md
│   └── 章节/
└── 质量检查/
    ├── 一致性检查表.md
    └── 已完成章节索引.md
```

### 全书记忆文件模板

**伏笔追踪表.md**：
```markdown
# 伏笔追踪表

## 待回收伏笔

| 伏笔内容 | 埋设章节 | 预计回收 | 重要性 | 状态 |
|----------|----------|----------|--------|------|

## 已回收伏笔

| 伏笔内容 | 埋设章节 | 回收章节 | 效果评价 |
|----------|----------|----------|----------|
```

**已用套路库.md**：
```markdown
# 已用套路库

> 记录已使用的套路，避免重复

## 开场方式

| 类型 | 使用章节 | 间隔要求 |
|------|----------|----------|

## 打脸套路

| 类型 | 使用章节 | 间隔要求 |
|------|----------|----------|

## 名场面类型

| 类型 | 使用章节 | 间隔要求 |
|------|----------|----------|
```

**人物里程碑.md**：
```markdown
# 人物里程碑

## 主角成长

| 章节 | 里程碑事件 | 变化类型 | 影响 |
|------|------------|----------|------|

## 配角成长

| 章节 | 角色 | 里程碑事件 | 变化类型 |
|------|------|------------|----------|
```

### 按需创建的全书记忆文件

> 根据作品类型判断是否需要创建

**感情线节点.md**（有感情线时创建）：
```markdown
# 感情线节点

## 当前阶段

| 女主 | 当前阶段 | 好感度 | 下一节点 |
|------|----------|--------|----------|

## 关键节点记录

| 章节 | 女主 | 事件 | 阶段变化 |
|------|------|------|----------|
```

**势力变化表.md**（权谋/宫斗/多势力博弈时创建）：
```markdown
# 势力变化表

> 追踪主要势力的发展变化

## 主角势力发展

| 阶段 | 章节 | 事件 | 成员 | 势力评级 |
|------|------|------|------|----------|

## 敌对势力变化

| 势力 | 章节 | 事件 | 实力变化 | 与主角关系 |
|------|------|------|----------|------------|

## 仇人清算进度

| 仇人 | 仇恨等级 | 预计清算 | 实际清算 | 状态 |
|------|----------|----------|----------|------|
```

**世界线进度.md**（末世/时间线复杂时创建）：
```markdown
# 世界线进度

> 记录世界大事件时间线

## 当前时间点

- 当前时间：[时间]
- 当前位置：[地点]
- 大环境：[描述]

## 时间线记录

| 时间 | 章节 | 事件 | 影响 |
|------|------|------|------|
```

### 按需创建判断规则

| 文件 | 创建条件 |
|------|----------|
| 感情线节点.md | 感情线比重 ≥ 10% 或 有明确女主设定 |
| 势力变化表.md | 题材为权谋/宫斗/群像/战争 或 主角需要建立势力 |
| 世界线进度.md | 题材为末世/穿越/时间线复杂 或 有明确时间跨度设定 |

### 动态状态文件模板

**人物当前状态.md**：
```markdown
# 人物当前状态

> 记录各角色的最新状态，auto-write 每章更新

## 主角

| 属性 | 当前值 | 上次变化 |
|------|--------|----------|
| 修为 | | |
| 位置 | | |
| 情绪 | | |
| 目标 | | |

## 重要配角

| 角色 | 修为 | 位置 | 与主角关系 | 状态 |
|------|------|------|------------|------|
```

**叙事手法记录.md**：
```markdown
# 叙事手法记录

> 记录最近章节使用的叙事手法，避免重复

## 最近10章记录

| 章节 | 开头方式 | 情感基调 | 视角运用 | 特色手法 |
|------|----------|----------|----------|----------|
```

---

## 阶段4.5：生成写作流程.md（⭐根据作品类型定制）

### 4.5.1 读取流程指南

首先读取 `~/.factory/commands/docs/写作流程指南.md`，获取各流程类型的命令列表。

### 4.5.2 流程类型判断

根据 AGENTS.md 中的**题材**和**基调**，判断推荐流程：

| 题材/基调 | 推荐流程 |
|-----------|----------|
| 轻松/搞笑/脑洞/系统流/无脑爽 | 精简流程 |
| 复仇/重生/逆袭/标准爽文 | 标准流程 |
| 权谋/宫斗/群像/悬疑 | 完整流程 |
| 言情/甜宠/古言 | 言情流程 |
| 玄幻/仙侠/热血/升级 | 战斗流程 |

### 4.5.3 生成写作流程.md

从 `写作流程指南.md` 中提取对应流程的命令列表，生成项目定制的 `写作流程.md`：

```markdown
# 《[书名]》写作流程

> 根据本作品类型（[题材] + [基调]）定制的写作流程

## 推荐流程：[流程名称]

本作品特点：
- 题材：[题材]
- 基调：[基调]
- 感情线比重：[比重]

---

## 一、已完成 ✓

- [x] /idea-mill → 灵感方案.md
- [x] /packaging-kit → 包装方案.md
- [x] /init-novel → 项目初始化

---

## 二、框架设计（下一步）

### 必须执行
[从写作流程指南.md提取该流程的必须命令]

### 可选执行
[从写作流程指南.md提取该流程的可选命令]

---

## 三、大纲规划

### 必须执行
[从写作流程指南.md提取]

### 可选执行
[从写作流程指南.md提取]

---

## 四、写作执行

[从写作流程指南.md提取]

---

## 五、质量检查

### 必须执行
[从写作流程指南.md提取]

### 可选执行
[从写作流程指南.md提取]

---

## 命令速查

| 阶段 | 本作品推荐命令 |
|------|----------------|
| 框架设计 | [从写作流程指南.md提取] |
| 大纲规划 | [从写作流程指南.md提取] |
| 写作执行 | [从写作流程指南.md提取] |
| 质量检查 | [从写作流程指南.md提取] |

---

> 此文件由 /init-novel 根据作品类型自动生成
> 命令列表来源：~/.factory/commands/docs/写作流程指南.md
```

---

## 阶段五：输出确认

```
===== 小说项目初始化完成 =====

书名：XXX
题材：XXX
字数：XXX万字（X卷×X章×X字）
差异化：XXX
推荐流程：[精简/标准/完整]流程

已生成文件：
✓ AGENTS.md（写作规范，~50行精简版）
✓ 小说规划.md（总体规划骨架）
✓ 写作流程.md（根据作品类型定制）
✓ 目录结构

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

📋 下一步操作（见 写作流程.md）：

1. /design-world
   → 深度设计世界观（等级体系、势力分布等）

2. /design-characters
   → 深度设计人物（主角、仇人、配角）

3. /design-style
   → 设计写作风格（文风、节奏、对话风格）

4. /design-plot
   → 深度设计剧情（结构、冲突、伏笔等）

5. /plan-volume 卷一 [卷名]
   → 开始规划第一卷大纲

===================================
```

---

## 注意事项

1. **这只是起点**：init-novel 只生成骨架，需要用专项命令深化
2. **按顺序完善**：世界观 → 人物 → 风格 → 剧情 → 大纲
3. **AGENTS.md 是索引**：详细内容在各专项文件中，减少token消耗
4. **可以迭代**：任何时候都可以回来完善
