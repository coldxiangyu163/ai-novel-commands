---
description: 伏笔智能提醒（主动提醒伏笔回收时机，防止遗忘）
argument-hint: [无参数，自动集成到auto-write]
---

# 伏笔智能提醒（伏笔GPS）

**集成到 auto-write 阶段一，每次写作前自动检查伏笔回收时机。**

> **核心理念**：
> - 长篇失控的一大原因：伏笔遗忘，前后矛盾
> - 现有伏笔追踪是"被动查看"，缺少"主动提醒"
> - 伏笔GPS像导航一样，提前提醒"前方X章需要回收伏笔"

---

## 第一步：读取伏笔数据

从 `全书记忆/伏笔追踪表.md` 读取所有伏笔数据：

### 1.1 伏笔追踪表格式（标准版）

```markdown
| 伏笔ID | 埋设位置 | 伏笔内容 | 预计回收位置 | 实际回收位置 | 重要性 | 状态 |
|--------|---------|---------|-------------|-------------|--------|------|
| F001 | 卷一第5章 | 主角真实身份 | 卷五第20章 | 未回收 | 高 | 待回收 |
| F002 | 卷一第10章 | 神秘物品 | 卷三第15章 | 未回收 | 中 | 待回收 |
| F003 | 卷二第8章 | 某角色异常行为 | 卷四第25章 | 卷四第27章 | 中 | 已回收 |
| F004 | 卷二第15章 | 末世起源线索 | 卷九第30章 | 未回收 | 高 | 待回收 |
```

### 1.2 确定当前写作位置

从 `auto-write` 参数获取当前写作章节：
- 当前卷：卷X
- 当前章：第Y章
- 全书章节号：第Z章（如有总章节编号）

---

## 第二步：计算伏笔距离

### 2.1 距离计算规则

对于每个"待回收"状态的伏笔，计算：
- **预计回收章节**：从伏笔追踪表提取
- **当前章节**：auto-write参数
- **距离**：预计回收章节 - 当前章节

### 2.2 提醒等级

| 距离 | 提醒等级 | 符号 | 说明 |
|------|---------|------|------|
| ≤0章 | 🔴 紧急 | ⚠️⚠️⚠️ | 已超过预计回收位置 |
| 1-3章 | 🟠 重要 | ⚠️⚠️ | 即将到来，本章或下章回收 |
| 4-10章 | 🟡 注意 | ⚠️ | 不远了，开始铺垫 |
| 11-30章 | 🟢 正常 | - | 暂不提醒 |
| >30章 | 🟢 正常 | - | 暂不提醒 |

---

## 第三步：生成伏笔提醒

### 3.1 即将回收提醒（距离≤10章）

```markdown
## 🔔 伏笔回收提醒

### ⚠️⚠️⚠️ 紧急（已超过预计位置）

#### 伏笔F001：主角真实身份
- 埋设位置：卷一第5章
- 预计回收：卷五第20章
- 当前章节：卷五第22章
- **状态**：已超过预计位置2章 ⚠️
- **建议**：本章或下章必须回收，否则拖太久读者会遗忘

---

### ⚠️⚠️ 重要（1-3章内回收）

#### 伏笔F002：神秘物品
- 埋设位置：卷一第10章
- 预计回收：卷三第15章
- 当前章节：卷三第13章
- **距离**：还有2章
- **建议**：本章开始铺垫，第15章回收
- **铺垫方式**：
  - 本章（第13章）：让主角注意到物品的异常
  - 下章（第14章）：研究/询问物品来历
  - 第15章：揭示物品真相

---

### ⚠️ 注意（4-10章内回收）

#### 伏笔F004：末世起源线索
- 埋设位置：卷二第15章
- 预计回收：卷九第30章
- 当前章节：卷九第22章
- **距离**：还有8章
- **建议**：开始在对话/场景中暗示，为回收做准备
```

### 3.2 遗忘风险预警（超过50章未推进）

```markdown
### ⚠️ 遗忘风险预警

**检测规则**：埋设后超过50章未回收或推进 → 遗忘风险

#### 伏笔F005：某角色真实目的
- 埋设位置：卷一第8章
- 预计回收：卷七第10章
- 当前章节：卷三第15章
- **距离埋设**：已过62章
- **距离回收**：还有155章
- **风险**：已埋设62章，未推进，读者可能遗忘 ⚠️
- **建议**：在本卷内增加一次中间推进（如：该角色再次出现异常行为）

---

#### 伏笔F006：世界观真相（第二层）
- 埋设位置：卷二第5章
- 预计回收：卷八第20章
- 当前章节：卷四第10章
- **距离埋设**：已过65章
- **距离回收**：还有170章
- **风险**：已埋设65章，未推进，读者可能遗忘 ⚠️
- **建议**：采用"分层揭秘"策略，在卷五左右揭示第一层真相，保持热度
```

---

## 第四步：中长线伏笔维护建议

### 4.1 伏笔推进策略

```markdown
## 中长线伏笔维护

### 伏笔推进规则
- **短线伏笔**（埋设后≤20章回收）：无需中间推进
- **中线伏笔**（埋设后20-50章回收）：建议中间推进1次
- **长线伏笔**（埋设后>50章回收）：建议中间推进2-3次

### 需要推进的伏笔

#### 伏笔F004：末世起源线索
- 类型：长线伏笔（埋设卷二，回收卷九）
- 已推进：0次
- 建议推进计划：
  - 第1次推进：卷四左右（揭示第一层线索）
  - 第2次推进：卷六左右（揭示第二层线索）
  - 最终回收：卷九第30章（揭示终极真相）

---

#### 伏笔F005：某角色真实目的
- 类型：长线伏笔（埋设卷一，回收卷七）
- 已推进：0次
- 建议推进计划：
  - 第1次推进：卷三（角色再次出现异常）
  - 第2次推进：卷五（主角开始怀疑）
  - 最终回收：卷七第10章（真相揭晓）
```

---

## 第五步：输出提醒（集成到auto-write）

### 5.1 提醒输出格式

**在 auto-write 阶段一"读取文档"后，自动输出：**

```
===== 伏笔回收提醒 =====

🔔 本章伏笔提醒：

⚠️⚠️⚠️ 紧急（已超过预计位置）
- 伏笔F001：主角真实身份（已超过2章）→ 本章必须回收

⚠️⚠️ 重要（1-3章内回收）
- 伏笔F002：神秘物品（还有2章）→ 本章开始铺垫

⚠️ 注意（4-10章内回收）
- 伏笔F004：末世起源线索（还有8章）→ 开始暗示

⚠️ 遗忘风险（超过50章未推进）
- 伏笔F005：某角色真实目的（已埋设62章）→ 建议本卷内推进

===========================
```

### 5.2 写作指导

**根据提醒等级，给出具体写作建议：**

```markdown
## 本章写作建议（基于伏笔提醒）

### 必须融入内容（🔴紧急）
- 伏笔F001回收：在本章的[关键场景]中揭示主角真实身份
  - 建议场景：高潮场景/对话场景/危机时刻
  - 揭示方式：[具体建议]

### 建议融入内容（🟠重要/🟡注意）
- 伏笔F002铺垫：让主角注意到神秘物品的异常
  - 建议场景：整理物品/研究/队友提及
  - 铺垫方式：一句话/一个细节即可

### 可选融入内容（🟢遗忘风险）
- 伏笔F005推进：让某角色再次出现异常行为
  - 可选：如本章有该角色出场，可安排异常行为
  - 如无出场：可在下一章安排
```

---

## 第六步：回收确认与记录

### 6.1 自动检测回收

**在 auto-write 阶段六"输出"后，检测：**
- 如果本章大纲中标注了"回收伏笔FXX"
- 自动更新 `全书记忆/伏笔追踪表.md`：
  - 状态：待回收 → 已回收
  - 实际回收位置：卷X第Y章

### 6.2 手动确认回收

**如果 auto-write 未自动检测到，用户可手动运行：**

```
/update-foreshadow F001 已回收 卷五第22章
```

更新伏笔追踪表。

---

## 第七步：伏笔健康检查

### 7.1 伏笔统计

```markdown
## 伏笔健康统计

### 伏笔状态
- 待回收：XX个
- 已回收：XX个
- 已放弃：XX个
- 回收率：XX%

### 伏笔重要性分布
- 高重要性：XX个（待回收XX个）
- 中重要性：XX个（待回收XX个）
- 低重要性：XX个（待回收XX个）

### 遗忘风险
- 超过50章未推进：XX个 ⚠️
- 超过100章未推进：XX个 ⚠️⚠️
- 超过预计回收位置：XX个 ⚠️⚠️⚠️
```

### 7.2 健康度评分

| 指标 | 数值 | 健康值 | 状态 |
|------|------|--------|------|
| 回收率 | XX% | ≥80% | ✓/⚠️/✗ |
| 超期伏笔数 | XX个 | ≤2个 | ✓/⚠️/✗ |
| 遗忘风险伏笔数 | XX个 | ≤3个 | ✓/⚠️/✗ |
| 高重要性待回收 | XX个 | - | 关注 |

---

## 使用时机

```
【自动模式】（推荐）
/auto-write 1 1
    ↓（自动调用）
/foreshadow-reminder ← 自动检查伏笔
    ↓（显示提醒）
[写作时融入提醒的伏笔]
    ↓
[auto-write完成]

【手动模式】
/foreshadow-reminder ← 单独运行，查看所有伏笔状态
```

---

## 注意事项

1. **伏笔追踪表必须维护**：每次规划大纲时，将伏笔记录到追踪表
2. **预计回收位置要合理**：太近=浅层悬念，太远=容易遗忘
3. **中长线伏笔要推进**：不要埋下后就不管，要定期推进
4. **回收要有仪式感**：重要伏笔回收要充分展开，不能一笔带过
5. **伏笔不是越多越好**：过多伏笔会混乱，建议10-20个主要伏笔

---

## 附录：伏笔管理最佳实践

### A. 伏笔分类管理

**按重要性分类**：
- **高重要性伏笔**（5-8个）：
  - 主角身世/世界观真相/终极反派真实目的
  - 必须回收，不能遗忘
- **中重要性伏笔**（8-12个）：
  - 配角秘密/次要真相/关键物品
  - 应该回收，可适度调整
- **低重要性伏笔**（若干）：
  - 小彩蛋/小线索/氛围营造
  - 可回收可不回收

**按回收时间分类**：
- **短线伏笔**（≤20章）：单卷内回收
- **中线伏笔**（20-50章）：跨2-3卷回收
- **长线伏笔**（>50章）：跨多卷回收

### B. 伏笔埋设技巧

**"三不"原则**：
1. **不要太明显**：伏笔是"暗示"，不是"明说"
2. **不要太隐蔽**：伏笔要让读者能回忆起来
3. **不要太多**：过多伏笔=没有伏笔

**埋设方式**：
- 对话中一句话
- 场景中一个细节
- 角色的异常行为
- 看似无关的信息

### C. 伏笔回收技巧

**回收三要素**：
1. **回顾**：让读者回忆起伏笔（如：主角想起当初的异常）
2. **揭示**：揭示伏笔的真相
3. **影响**：揭示后对剧情的影响

**回收禁忌**：
- ❌ 一笔带过（重要伏笔回收太草率）
- ❌ 没有回顾（读者已忘记，直接揭示=无感）
- ❌ 拖太久（超过100章，读者早忘了）

### D. 分层揭秘策略

**洋葱式揭秘**（适用于世界观/身世类伏笔）：

```
埋设（卷一）：暗示末世起源不简单
    ↓
第一层（卷三）：揭示是人造病毒
    ↓
第二层（卷六）：揭示是某组织故意释放
    ↓
第三层（卷九）：揭示主角前世参与了病毒研发
    ↓
终极真相（卷十）：揭示一切是循环，主角是关键
```

**优点**：
- 保持悬念热度
- 避免读者遗忘
- 增加震撼感（层层递进）

---

## 常见问题

**Q1：伏笔超过预计回收位置了怎么办？**
A：立即回收或调整预计位置。如果拖太久（超过10章），读者可能已遗忘，回收效果会大打折扣。

**Q2：我想调整伏笔回收位置，怎么办？**
A：直接修改 `全书记忆/伏笔追踪表.md` 中的"预计回收位置"。但要注意：
- 不要频繁调整（说明规划不合理）
- 调整后确保间隔合理（不要太近或太远）

**Q3：有的伏笔写作时发现不需要了，可以放弃吗？**
A：可以。在伏笔追踪表中将状态改为"已放弃"，并注明原因。但要注意：
- 高重要性伏笔不建议放弃（会让读者失望）
- 如果已多次推进，放弃会让前期铺垫浪费

**Q4：伏笔提醒会不会干扰创作？**
A：不会。伏笔提醒只是"建议"，不是"强制"。你可以：
- 本章不回收，下章回收
- 调整预计回收位置
- 在大纲中明确标注"本章不回收伏笔"

**Q5：如何判断伏笔是否需要推进？**
A：看埋设时间和读者记忆周期：
- 超过30章：建议推进1次（如：再次暗示）
- 超过50章：必须推进1-2次（否则读者会遗忘）
- 推进方式：不需要大动作，一句对话/一个细节即可
